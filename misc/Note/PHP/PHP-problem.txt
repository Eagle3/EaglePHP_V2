###  PHP小问题记录   ###

1. php使用CURL向https地址POST数据时，可能出现 curl: (35) SSL connect error 错误提示，经查询需要 yum update nss  (升级网络安全服务) ，
	最后输入：/etc/init.d/php-fpm restart 命令；重启php-fpm。
	http://jingyan.baidu.com/article/4f7d5712de812f1a201927f5.html

2. php生产环境关闭错误信息，并把错误信息写入日志中
	;错误信息是否显示，生产环境关闭
	display_errors = off
	;是否开启 记录错误日志
	log_errors = on
	;指定错误报告写入日志文件位置,需要开启错误日志记录选项： log_errors = On  
	error_log = D:\phpStudy\tmp\php_error_log\php_errors.log

3. php使用hash_hmac函数sha1算法加密时与Java生成的不一致。PHP默认生成是40个字符，Java是20个
	解决方法：
	//hash_hmac函数的第四个参数设置为true即可
	$hashMac = hash_hmac( 'sha1', $str, $key, true );
	base64_encode( $hashMac );
	
4. PHP使用curl请求，HTTPS协议时有可能请求不成功需要修改一下两项
	curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); //https不验证证书
	curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false); //https不验证证书
   
5. PHP使用curl请求，设置header头方式
	curl_setopt($ch, CURLOPT_HTTPHEADER, array(
			'Content-Type:application/x-www-form-urlencoded',
    		"Authorization: MAC id=\"{$appId}\",ts=\"{$timestamp}\",nonce=\"{$nonce}\",mac=\"{$signature}\"",

    		"name: 张三\n\n", //经测试，最多只能有一个换行符，大于1个，会接受不到header头信息。
	));
	
6. Nginx和Apache中添加PHP环境变量，使用PHP的$_SERVER可以获取到该值
	Apache 中配置:
	打开 httpd.conf 文件添加以下类似代码
	SetEnv APP_ENV "dev"
	SetEnv APP_ZONE "TW"
	
	Nginx 中配置:
	打开 fastcgi_params 文件添加以下类似代码
	fastcgi_param  APP_ENV 			  dev;

7. PHP7在Windows下默认不支持短标签 即 <? ?> ,如果有短标签，修改PHP配置文件开启支持短标签。Linux下默认支持短标签。   short_open_tag = On

















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































